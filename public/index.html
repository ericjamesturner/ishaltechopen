<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haltech Hours Checker</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold mb-6 text-center">Haltech Locations Open Status</h1>
        <div class="overflow-x-auto">
            <table class="min-w-full bg-white shadow-md rounded-lg">
                <thead>
                    <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                        <th class="py-3 px-6 text-left">Location</th>
                        <th class="py-3 px-6 text-left">Status</th>
                        <th class="py-3 px-6 text-left">Next Open/Close</th>
                        <th class="py-3 px-6 text-left">Contact</th>
                    </tr>
                </thead>
                <tbody id="results" class="text-gray-700"></tbody>
            </table>
        </div>
    </div>

    <script>
        function isOpenNow(openTime, closeTime, timeZone) {
            const now = new Date();
            const options = { timeZone, hour12: false, hour: '2-digit', minute: '2-digit' };
            const formatter = new Intl.DateTimeFormat('en-US', options);
            const localTime = formatter.format(now);

            const [openHour, openMinute] = openTime.split(':').map(Number);
            const [closeHour, closeMinute] = closeTime.split(':').map(Number);
            const [currentHour, currentMinute] = localTime.split(':').map(Number);

            const openMinutes = openHour * 60 + openMinute;
            const closeMinutes = closeHour * 60 + closeMinute;
            const currentMinutes = currentHour * 60 + currentMinute;

            return {
                isOpen: currentMinutes >= openMinutes && currentMinutes <= closeMinutes,
                currentMinutes,
                openMinutes,
                closeMinutes
            };
        }

        const locations = [
            { name: "Haltech USA EAST", timeZone: "America/New_York", open: "08:00", close: "17:00", phone: "(888) 298 8116" },
            { name: "Haltech USA WEST", timeZone: "America/Los_Angeles", open: "08:00", close: "17:00", phone: "(888) 298 8116" },
            { name: "Haltech UK", timeZone: "Europe/London", open: "08:00", close: "17:00", phone: "+44 121 285 6650" },
            { name: "Haltech NZ", timeZone: "Pacific/Auckland", open: "11:00", close: "19:00", phone: "+64 988 706 16" },
            { name: "Haltech Australia", timeZone: "Australia/Sydney", open: "09:00", close: "17:00", phone: "+61 2 9729 0999" },
            { name: "Haltech EU", timeZone: "Europe/Vienna", open: "08:00", close: "17:00", phone: "+43 720 883968" }
        ];

        function updateStatus() {
            const results = document.getElementById("results");
            results.innerHTML = "";

            locations.forEach(location => {
                const { isOpen, currentMinutes, openMinutes, closeMinutes } = isOpenNow(location.open, location.close, location.timeZone);
                const statusText = isOpen ? "Open" : "Closed";
                const statusColor = isOpen ? "text-green-500" : "text-red-500";
                let nextEvent = "";

                if (isOpen) {
                    const minutesToClose = closeMinutes - currentMinutes;
                    const hours = Math.floor(minutesToClose / 60);
                    const minutes = minutesToClose % 60;
                    if (minutesToClose === 0) {
                        nextEvent = "Closing Now";
                    } else {
                        nextEvent = minutesToClose <= 30 ? `Closing in ${minutesToClose} minutes` : `Open for ${hours > 0 ? `${hours}h` : ''}${minutes > 0 ? ` ${minutes}m` : ''}`;
                    }
                } else {
                    const minutesSinceClose = currentMinutes - closeMinutes;
                    const minutesToOpen = openMinutes - currentMinutes;
                    const hoursSinceClose = Math.floor(minutesSinceClose / 60);
                    const minutesSinceCloseRemainder = minutesSinceClose % 60;
                    const hoursToOpen = Math.floor(minutesToOpen / 60);
                    const minutesToOpenRemainder = minutesToOpen % 60;

                    if (minutesToOpen > 0) {
                        nextEvent = `Opens in ${hoursToOpen > 0 ? `${hoursToOpen}h` : ''}${minutesToOpenRemainder > 0 ? ` ${minutesToOpenRemainder}m` : ''}`;
                    } else {
                        nextEvent = `Closed ${hoursSinceClose > 0 ? `${hoursSinceClose}h` : ''}${minutesSinceCloseRemainder > 0 ? ` ${minutesSinceCloseRemainder}m` : ''} ago`;
                    }
                }

                const row = document.createElement("tr");
                row.className = "border-b border-gray-200 hover:bg-gray-100";
                row.innerHTML = `
                    <td class="py-3 px-6 text-left"><strong>${location.name}</strong></td>
                    <td class="py-3 px-6 ${statusColor}">${statusText}</td>
                    <td class="py-3 px-6">${nextEvent}</td>
                    <td class="py-3 px-6"><a href="tel:${location.phone}">${location.phone}</a></td>
                `;
                results.appendChild(row);
            });
        }

        document.addEventListener("DOMContentLoaded", updateStatus);
    </script>
</body>
</html>
